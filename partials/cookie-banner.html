<div id="cookie-banner" class="cookie-banner">
  <p>
    เว็บไซต์นี้ใช้คุกกี้เพื่อพัฒนาประสบการณ์ของผู้ใช้
    อ่านเพิ่มเติมได้ที่
    <a href="/privacy.html" target="_blank">นโยบายความเป็นส่วนตัว</a>
    และ
    <a href="/terms.html" target="_blank">ข้อกำหนดและเงื่อนไข</a>
  </p>
  <button id="accept-cookie">ยอมรับ</button>
  <button id="reject-cookie">ปฏิเสธ</button>
  <span id="close-cookie-banner" class="cookie-close-btn" title="ปิด">&times;</span>
  <style>
    
  </style>
  <script>
/* แสดง cookie banner ครั้งแรก */
(function () {
  const consent = localStorage.getItem('cookie_consent');
  const banner = document.getElementById('cookieBanner');
  if (!consent && banner) {
    banner.hidden = false;
  }
})();

/* กดยอมรับคุกกี้ */
function acceptCookies() {
  localStorage.setItem('cookie_consent', 'accepted');
  const banner = document.getElementById('cookieBanner');
  if (banner) banner.hidden = true;
}

/* เปิด policy เป็น popup */
function openPolicy(url) {
  fetch(url)
    .then(res => res.text())
    .then(html => {
      document.getElementById('policyContent').innerHTML = html;
      document.getElementById('policyModal').classList.add('active');
      document.body.style.overflow = 'hidden';
    });
}

/* ปิด popup */
function closePolicy() {
  document.getElementById('policyModal').classList.remove('active');
  document.body.style.overflow = '';
}

// Prayer Form submission
    document.getElementById('prayerForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formSuccess = document.getElementById('prayerSuccess');
      formSuccess.classList.add('show');
      this.reset();
      
      setTimeout(() => {
        formSuccess.classList.remove('show');
      }, 5000);
    });

(function () {
  const banner = document.getElementById("cookie-banner");
  const acceptBtn = document.getElementById("accept-cookie");
  const rejectBtn = document.getElementById("reject-cookie");
  const closeBtn  = document.getElementById("close-cookie-banner");

  const COOKIE_KEY = "cookieConsent"; 
  // ค่า: accepted | rejected

  // ถ้ามีการตัดสินใจแล้ว ไม่ต้องแสดง
  const consent = localStorage.getItem(COOKIE_KEY);
  if (consent === "accepted" || consent === "rejected") {
    banner.style.display = "none";
    return;
  }

  // ยอมรับ
  acceptBtn.addEventListener("click", function () {
    localStorage.setItem(COOKIE_KEY, "accepted");
    banner.style.display = "none";

    // ถ้ามี Analytics / Script อื่น
    // initAnalytics();
  });

  // ปฏิเสธ
  rejectBtn.addEventListener("click", function () {
    localStorage.setItem(COOKIE_KEY, "rejected");
    banner.style.display = "none";
  });

  // ปิดเฉย ๆ (ยังไม่เลือก)
  closeBtn.addEventListener("click", function () {
    banner.style.display = "none";
  });
})();


</script>
</div>

